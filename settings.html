<!-- 
  Copyright (c) [2024] [Pulento - https://github.com/pulento]

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, and to permit persons to
  whom the Software is furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in all
  copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
  SOFTWARE.

  Redistribution and use in source and binary forms, with or without
  modification, are not permitted for commercial purposes without the explicit
  permission of the author.
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link href="./styles.css" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>A1 Evo - Settings</title>
</head>
<body onpageshow="getSettingsConfig()">
  <div class="container">
    <h3>A1Evo Preferences</h3>
    <div class="customization-options"> 
      <label>
        <input type="checkbox" id="forceSmall_set" onchange="settingsChanged()">
        Force small fronts
        <span class="explanation">If selected, front speakers will NOT be set to 'Large / Full range.'</span>
      </label>
      <label>
        <input type="checkbox" id="forceWeak_set" onchange="settingsChanged()">
        Force weak receiver
        <span class="explanation">Select this option in systems with less powerful receivers and/or identical speakers, bed channels will be crossed over at 80Hz and Atmos channels at 120Hz.</span>
      </label>
      <label>
        <input type="checkbox" id="forceCentre_set" onchange="settingsChanged()">
        Align sub to centre speaker
        <span class="explanation">Subwoofer(s) will be time aligned to the 'Centre' speaker, front speakers will be set to 'Large', 'Subwoofer Mode' will need to be set to 'LFE' in the receiver.</span>
      </label>
      <label>
        <input type="checkbox" id="forceLarge_set" onchange="settingsChanged()">
        Force large fronts
        <span class="explanation">When selected, front speakers will NOT be set to 'Small'.</span>
      </label>
      <label>
        <input type="checkbox" id="noInversion_set" onchange="settingsChanged()">
        Avoid sub polarity inversion
        <span class="explanation">Avoids subwoofer polarity inversion checks in optimizations. Select this option if your sub(s) don't have a polarity/phase inversion flip switch.</span>
      </label>
      <label>
        <input type="checkbox" id="limitLPF_set" onchange="settingsChanged()">
        Cap subwoofer LPF frequency
        <span class="explanation">Limits lowpass filter evaluation frequencies for even number of sub(s) (odd number of sub(s) are automatically limited) to avoid bass localization in 'LFE + Main' mode.</span>
      </label>
      <label>
        <input type="checkbox" id="forceMLP_set" onchange="settingsChanged()">
        Force 1st mic position @ MLP
        <span class="explanation">Only first microphone position measurements will be used in calculations rather than average of all measured mic positions. May yield better results in certain room conditions.</span>
      </label>
    </div>  
    <div class="xo-options">
      <form>
        <p>
          End Frequency (100-10000):
          <input type="number" id="endFreq_set" name="endFreq_set" min="100" max="10000" value="250" onchange="settingsChanged()"/>
          Max Boost (0-12):
          <input type="number" id="maxBoost_set" name="maxBoost_set" min="0" max="12" value="0" onchange="settingsChanged()"/>
          Overall Max Boost (0-12): <input type="number" id="omaxBoost_set" name="omaxBoost_set" min="0" max="12" value="0" onchange="settingsChanged()"/>
        </p>
        <p>
          Target Curve: 
          <input type="text" id="targetCurve_set" name="targetCurve_set" minlength="4" maxlength="200" size="80" onchange="settingsChanged()" onclick="targetDialog()"/>
        </p>
      </form>
    </div>
    <script>
      var coll = document.getElementsByClassName("collapsible");
      var i;
      
      for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function() {
          this.classList.toggle("active");
          var content = this.nextElementSibling;
          if (content.style.maxHeight){
            content.style.maxHeight = null;
          } else {
            content.style.maxHeight = content.scrollHeight + "px";
          }
        });
      }
    </script>
    <h3 class="collapsible">A1Evo Crossovers Preferences</h3>
    <div class="xo-content">
      <div class="bignotice">
        * Here you can set crossovers search ranges for each channel.<br>
        * Please note that values entered aren't check against your specificy AVR.<br>
        * Setting only the LOW value forces XO to that value.
      </div>
      <div id="xo-options" class="xo-options">
      </div>
    </div>  
    <h3>A1Evo Electrified Preferences</h3>
    <div class="customization-options">
      <label>
        Work Directory:
        <input type="text" id="workingDir_set" name="workingDir_set" minlength="4" maxlength="200" size="80" value="A1Evo" onclick="workingDialog()"/>
      </label>
    </div>
    <script src="./settings.js"></script>
    <script>
      var coll = document.getElementsByClassName("collapsible");
      var i;
      
      for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function() {
          this.classList.toggle("active");
          var content = this.nextElementSibling;
          if (content.style.maxHeight){
            content.style.maxHeight = null;
          } else {
            content.style.maxHeight = content.scrollHeight + "px";
          }
        });
      }
    </script>
  </div>
</body>
